{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { saveApeArticleFavor, removeApeArticleFavor, getApeArticleById, saveApeArticleComment, getApeArticleCommentByArticleId } from '../../api/api';\nimport headerPage from \"../../components/header/header\";\nimport bottomPage from \"../../components/bottom/bottom\";\nexport default {\n  data() {\n    return {\n      user: {},\n      articleId: \"\",\n      article: {},\n      content: \"\",\n      commentList: []\n    };\n  },\n  components: {\n    headerPage,\n    bottomPage\n  },\n  methods: {\n    removeFavor() {\n      var param = {\n        articleId: this.articleId,\n        userId: this.user.id\n      };\n      removeApeArticleFavor(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            type: 'success',\n            message: '取消收藏成功!'\n          });\n          this.getApeArticleById();\n        }\n      });\n    },\n    addFavor() {\n      var param = {\n        articleId: this.articleId,\n        userId: this.user.id\n      };\n      saveApeArticleFavor(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            type: 'success',\n            message: '收藏成功!'\n          });\n          this.getApeArticleById();\n        }\n      });\n    },\n    editArticle() {\n      this.$router.push(\"/editArticle\");\n    },\n    saveApeArticleComment() {\n      var param = {\n        taskId: this.articleId,\n        content: this.content\n      };\n      saveApeArticleComment(param).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            type: 'success',\n            message: '评论成功!'\n          });\n          this.content = \"\";\n          this.getApeArticleCommentByArticleId();\n        }\n      });\n    },\n    getApeArticleCommentByArticleId() {\n      getApeArticleCommentByArticleId({\n        id: this.articleId\n      }).then(res => {\n        if (res.code == 1000) {\n          this.commentList = res.data;\n        }\n      });\n    },\n    getApeArticleById() {\n      getApeArticleById({\n        id: this.articleId\n      }).then(res => {\n        if (res.code == 1000) {\n          this.article = res.data;\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n    var articleId = this.$route.query.id;\n    if (articleId) {\n      this.articleId = articleId;\n    }\n    this.getApeArticleById();\n    this.getApeArticleCommentByArticleId();\n    this.user = JSON.parse(window.localStorage.getItem(\"user_info\"));\n  }\n};","map":{"version":3,"names":["saveApeArticleFavor","removeApeArticleFavor","getApeArticleById","saveApeArticleComment","getApeArticleCommentByArticleId","headerPage","bottomPage","data","user","articleId","article","content","commentList","components","methods","removeFavor","param","userId","id","then","res","code","$message","type","message","addFavor","editArticle","$router","push","taskId","created","mounted","window","scrollTo","top","behavior","$route","query","JSON","parse","localStorage","getItem"],"sources":["src/views/article/articleInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"articleInfo\">\r\n      <headerPage></headerPage>\r\n      <div class=\"articleInfo-content\">\r\n          <div class=\"articleInfo-title\">\r\n              <div>\r\n                  <div class=\"articleInfo-title1\">{{article.title}}</div>\r\n                  <div class=\"articleInfo-title2\">{{article.createBy}} - {{article.createTime}}</div>\r\n              </div>\r\n              <div>\r\n                <el-button v-if=\"article.favor == 1\" type=\"warning\" @click=\"removeFavor\" icon=\"el-icon-star-off\" circle></el-button>\r\n                <el-button v-if=\"article.favor == 0\" type=\"success\" @click=\"addFavor\" icon=\"el-icon-star-on\" circle></el-button>\r\n                <el-button v-if=\"article.createBy == user.userName\" @click=\"editArticle(article.id)\" type=\"success\" icon=\"el-icon-edit\" circle></el-button>\r\n              </div>\r\n          </div>\r\n          <div class=\"articleInfo-desc\">\r\n              <div class=\"articleInfo-desc1\">\r\n                  <span style=\"font-weight:bold\">摘要：</span>{{article.articleDesc}}\r\n              </div>\r\n              <div class=\"articleInfo-desc2\">\r\n                  <span style=\"font-weight:bold\">正文：</span>\r\n                  <div v-html=\"article.content\">\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n      <div class=\"articleInfo-bottom\">\r\n        <div class=\"articleInfo-comment\">\r\n            <div class=\"articleInfo-comment-font\">评论：</div>\r\n            <div class=\"articleInfo-comment-content\">\r\n                <el-input type=\"textarea\" resize=\"none\" rows=\"7\" v-model=\"content\" placeholder=\"请输入评论内容\"></el-input>\r\n                <div class=\"articleInfo-comment-btn\">\r\n                    <el-button @click=\"saveApeArticleComment\" style=\"margin-top:10px\" size=\"mini\" type=\"success\" plain>提交评论</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"articleInfo-bottom\">\r\n        <div class=\"articleInfo-comment\">\r\n            <div class=\"articleInfo-comment-font\">评论列表：</div>\r\n            <div v-if=\"commentList.length <= 0\" style=\"border: 2px solid #EFF1F2;border-radius: 7px;\">\r\n                <el-empty description=\"课程还没有评论，快去发表评论吧！\"></el-empty>\r\n            </div>\r\n            <div v-if=\"commentList.length > 0\" class=\"taskInfo-comment-list\">\r\n                <div v-for=\"(item,index) in commentList\" :key=\"index\">\r\n                    <div v-if=\"(index+1)%2 == 1\" class=\"taskInfo-comment-item\">\r\n                        <div>\r\n                            <img style=\"width:40px;height:40px;border-radius:50%\" :src=\"$store.state.HOST + item.avatar\">\r\n                        </div>\r\n                        <div style=\"width:80%\">\r\n                            <div class=\"taskInfo-comment-item1\">{{item.createBy}}</div>\r\n                            <div class=\"taskInfo-comment-item2\"><div style=\"padding-top:10px;padding-bottom:10px;margin-left:10px\">{{item.content}}</div></div>\r\n                        </div>\r\n                    </div>\r\n                    <div v-if=\"(index+1)%2 == 0\" class=\"taskInfo-comment-item-right\">\r\n                        <div style=\"width:60%;display:flex;flex-direction: column;align-items: flex-end;margin-right:15px\">\r\n                            <div class=\"taskInfo-comment-item1\">{{item.createBy}}</div>\r\n                            <div class=\"taskInfo-comment-item3\"><div style=\"padding-top:10px;padding-bottom:10px;margin-left:10px\">{{item.content}}</div></div>\r\n                        </div>\r\n                        <div>\r\n                            <img style=\"width:40px;height:40px;border-radius:50%\" :src=\"$store.state.HOST + item.avatar\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n      <bottomPage></bottomPage>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {saveApeArticleFavor,removeApeArticleFavor,getApeArticleById,saveApeArticleComment,getApeArticleCommentByArticleId} from '../../api/api' \r\n  import headerPage from \"../../components/header/header\"\r\n  import bottomPage from \"../../components/bottom/bottom\"\r\n  export default {\r\n    data() {\r\n      return{\r\n        user: {},\r\n        articleId: \"\",\r\n        article: {},\r\n        content: \"\",\r\n        commentList: []\r\n      }\r\n    },\r\n    components: {\r\n      headerPage,\r\n      bottomPage\r\n    },\r\n    methods: {\r\n      removeFavor() {\r\n        var param = {\r\n          articleId: this.articleId,\r\n          userId: this.user.id\r\n        }\r\n        removeApeArticleFavor(param).then(res => {\r\n          if(res.code == 1000) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '取消收藏成功!'\r\n            });\r\n            this.getApeArticleById()\r\n          }\r\n        })\r\n      },\r\n      addFavor() {\r\n        var param = {\r\n          articleId: this.articleId,\r\n          userId: this.user.id\r\n        }\r\n        saveApeArticleFavor(param).then(res => {\r\n          if(res.code == 1000) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '收藏成功!'\r\n            });\r\n            this.getApeArticleById()\r\n          }\r\n        })\r\n      },\r\n      editArticle() {\r\n        this.$router.push(\"/editArticle\")\r\n      },\r\n      saveApeArticleComment() {\r\n        var param = {\r\n          taskId: this.articleId,\r\n          content: this.content\r\n        }\r\n        saveApeArticleComment(param).then(res => {\r\n          if (res.code == 1000) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '评论成功!'\r\n            });\r\n            this.content = \"\"\r\n            this.getApeArticleCommentByArticleId()\r\n          }\r\n        })\r\n      },\r\n      getApeArticleCommentByArticleId() {\r\n        getApeArticleCommentByArticleId({id:this.articleId}).then(res => {\r\n          if (res.code == 1000) {\r\n            this.commentList = res.data\r\n          }\r\n        })\r\n      },\r\n      getApeArticleById() {\r\n        getApeArticleById({id: this.articleId}).then(res => {\r\n          if(res.code == 1000) {\r\n            this.article = res.data\r\n          }\r\n        }) \r\n      }\r\n    },\r\n    created() {\r\n     \r\n    },\r\n    mounted() {\r\n      window.scrollTo({\r\n        top: 0,\r\n        behavior: 'smooth'\r\n      });\r\n      var articleId = this.$route.query.id\r\n      if (articleId) {\r\n        this.articleId = articleId\r\n      }\r\n      this.getApeArticleById()\r\n      this.getApeArticleCommentByArticleId()\r\n      this.user = JSON.parse(window.localStorage.getItem(\"user_info\"))\r\n    }\r\n }\r\n</script>\r\n\r\n<style scoped>\r\n  @import url(\"../../assets/css/article/articleInfo.css\");\r\n  ::v-deep img {\r\n    max-width: 100% !important;\r\n  }\r\n</style>"],"mappings":";AAwEA,SAAAA,mBAAA,EAAAC,qBAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,+BAAA;AACA,OAAAC,UAAA;AACA,OAAAC,UAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,SAAA;MACAC,OAAA;MACAC,OAAA;MACAC,WAAA;IACA;EACA;EACAC,UAAA;IACAR,UAAA;IACAC;EACA;EACAQ,OAAA;IACAC,YAAA;MACA,IAAAC,KAAA;QACAP,SAAA,OAAAA,SAAA;QACAQ,MAAA,OAAAT,IAAA,CAAAU;MACA;MACAjB,qBAAA,CAAAe,KAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,IAAA;YACAC,OAAA;UACA;UACA,KAAAtB,iBAAA;QACA;MACA;IACA;IACAuB,SAAA;MACA,IAAAT,KAAA;QACAP,SAAA,OAAAA,SAAA;QACAQ,MAAA,OAAAT,IAAA,CAAAU;MACA;MACAlB,mBAAA,CAAAgB,KAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,IAAA;YACAC,OAAA;UACA;UACA,KAAAtB,iBAAA;QACA;MACA;IACA;IACAwB,YAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAzB,sBAAA;MACA,IAAAa,KAAA;QACAa,MAAA,OAAApB,SAAA;QACAE,OAAA,OAAAA;MACA;MACAR,qBAAA,CAAAa,KAAA,EAAAG,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAC,QAAA;YACAC,IAAA;YACAC,OAAA;UACA;UACA,KAAAb,OAAA;UACA,KAAAP,+BAAA;QACA;MACA;IACA;IACAA,gCAAA;MACAA,+BAAA;QAAAc,EAAA,OAAAT;MAAA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAT,WAAA,GAAAQ,GAAA,CAAAb,IAAA;QACA;MACA;IACA;IACAL,kBAAA;MACAA,iBAAA;QAAAgB,EAAA,OAAAT;MAAA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAX,OAAA,GAAAU,GAAA,CAAAb,IAAA;QACA;MACA;IACA;EACA;EACAuB,QAAA,GAEA;EACAC,QAAA;IACAC,MAAA,CAAAC,QAAA;MACAC,GAAA;MACAC,QAAA;IACA;IACA,IAAA1B,SAAA,QAAA2B,MAAA,CAAAC,KAAA,CAAAnB,EAAA;IACA,IAAAT,SAAA;MACA,KAAAA,SAAA,GAAAA,SAAA;IACA;IACA,KAAAP,iBAAA;IACA,KAAAE,+BAAA;IACA,KAAAI,IAAA,GAAA8B,IAAA,CAAAC,KAAA,CAAAP,MAAA,CAAAQ,YAAA,CAAAC,OAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}